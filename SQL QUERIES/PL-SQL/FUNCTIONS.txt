CREATE OR REPLACE FUNCTION NO_OF_FOLLOWERS(TO_FOLLOW_ID IN NUMBER)
RETURN NUMBER IS

	CNT NUMBER;

BEGIN
	
	SELECT COUNT(*) INTO CNT FROM FOLLOWS WHERE FOLLOWEE_ID = TO_FOLLOW_ID;
	
	RETURN CNT;

END ;
/

CREATE OR REPLACE FUNCTION NO_OF_FOLLOWINGS(FOLLOWING_ID IN NUMBER)
RETURN NUMBER IS

	CNT NUMBER;

BEGIN
	
	SELECT COUNT(*) INTO CNT FROM FOLLOWS WHERE FOLLOWER_ID = FOLLOWING_ID;
	
	RETURN CNT;

END ;
/

CREATE OR REPLACE FUNCTION NO_OF_POSTS(U_ID IN NUMBER)
RETURN NUMBER IS

	CNT NUMBER;

BEGIN
	
	SELECT COUNT(*) INTO CNT FROM POST WHERE USER_ID = U_ID;
	
	RETURN CNT;

END ;
/

CREATE OR REPLACE FUNCTION GET_UNSEEN_NOTIFICATIONS(U_ID IN NUMBER)
RETURN NUMBER IS

	CNT NUMBER;

BEGIN
	
	SELECT COUNT(*) INTO CNT FROM NOTIFICATION WHERE TO_ID = U_ID AND IS_SEEN = 0;
	
	RETURN CNT;

END ;
/

CREATE OR REPLACE FUNCTION COUNT_LIKES(P_ID IN NUMBER)
RETURN NUMBER IS

	CNT NUMBER;

BEGIN
	
	SELECT COUNT(*) INTO CNT FROM USER_LIKES_POST WHERE POST_ID = P_ID;
	
	RETURN CNT;

END ;
/

CREATE OR REPLACE FUNCTION COUNT_COMMENTS(P_ID IN NUMBER)
RETURN NUMBER IS

	CNT NUMBER;

BEGIN
	
	SELECT COUNT(*) INTO CNT FROM COMMENTS WHERE POST_ID = P_ID;
	
	RETURN CNT;

END ;
/
CREATE OR REPLACE FUNCTION GET_MUTUAL_FRIENDS(U_ID IN NUMBER, TO_FOLLOW IN NUMBER)
RETURN NUMBER IS

	CNT NUMBER;
	TEMP NUMBER;

BEGIN
		
		CNT := 0;
		
		FOR R IN (SELECT FOLLOWER_ID FROM FOLLOWS WHERE FOLLOWEE_ID = TO_FOLLOW)
		LOOP	
			SELECT COUNT(*) INTO TEMP FROM FOLLOWS WHERE FOLLOWER_ID = U_ID AND FOLLOWEE_ID = R.FOLLOWER_ID;
			CNT := CNT + TEMP;			
		END LOOP;
	
	RETURN CNT;

END ;
/